<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LOL ë‚´ì „ íŒ€ ëœë¤ ë°°ì •ê¸°</title>
  <style>
    body {
      font-family: sans-serif;
      background-color: #0e0e0e;
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 2rem;
    }
    textarea {
      width: 100%;
      max-width: 500px;
      height: 150px;
      margin-bottom: 1rem;
      padding: 0.5rem;
      font-size: 1rem;
      border-radius: 8px;
      border: none;
      resize: none;
    }
    button {
      padding: 0.5rem 1rem;
      font-size: 1rem;
      border: none;
      border-radius: 8px;
      background-color: #4caf50;
      color: white;
      cursor: pointer;
      margin: 0.25rem;
    }
    button:hover {
      background-color: #45a049;
    }
    .layout {
      display: flex;
      gap: 2rem;
      width: 100%;
      max-width: 900px;
    }
    .left-panel {
      flex: 2;
    }
    .right-panel {
      flex: 1;
      border-left: 1px solid #555;
      padding-left: 1rem;
    }
    .result-container {
      display: flex;
      justify-content: center;
      gap: 3rem;
      margin-top: 2rem;
      flex-wrap: wrap;
    }
    .team-box {
      min-width: 240px;
      white-space: pre-line;
      font-size: 1.1rem;
    }
    .team-title {
      font-size: 1.5rem;
      font-weight: bold;
      margin-bottom: 0.5rem;
    }
    .control-buttons {
      margin-top: 2rem;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .balance-output {
      margin-top: 1rem;
      white-space: pre-line;
      font-size: 1rem;
    }
  </style>
</head>
<body>
<h1>LOL ë‚´ì „ íŒ€ ëœë¤ ë°°ì •ê¸°</h1>
<div class="layout">
  <div class="left-panel">
    <p>10ëª…ì˜ ì†Œí™˜ì‚¬ ì´ë¦„ì„ <strong>ì‰¼í‘œ(,)</strong> ë˜ëŠ” <strong>ì¤„ë°”ê¿ˆ</strong>ìœ¼ë¡œ êµ¬ë¶„í•´ ì…ë ¥í•˜ì„¸ìš”</p>
    <textarea id="playerInput" placeholder="ì˜ˆì‹œ: ì •í˜„,ì˜í¬,ì² ìˆ˜,... ë˜ëŠ” ì¤„ë°”ê¿ˆìœ¼ë¡œ ì…ë ¥"></textarea>
    <div style="text-align: center; margin-top: 1rem;">
      <button onclick="assignTeams()">íŒ€ ë° ë¼ì¸ ëœë¤ ë°°ì •</button>
    </div>
    <div class="result-container" id="result"></div>
    <div class="control-buttons">
      <div>
        <button onclick="applyResult('red')">ğŸ”´ ë ˆë“œíŒ€ ìŠ¹ë¦¬ (+2) / ë¸”ë£¨íŒ€ (-2)</button>
        <button onclick="applyResult('blue')">ğŸŸ¦ ë¸”ë£¨íŒ€ ìŠ¹ë¦¬ (+2) / ë ˆë“œíŒ€ (-2)</button>
      </div>
      <div>
        <button onclick="surrender('red')">ğŸ”´ ë ˆë“œíŒ€ ê¸°ê¶Œ (-1) / ë¸”ë£¨íŒ€ (+1)</button>
        <button onclick="surrender('blue')">ğŸŸ¦ ë¸”ë£¨íŒ€ ê¸°ê¶Œ (-1) / ë ˆë“œíŒ€ (+1)</button>
      </div>
      <div>
        <button onclick="showBalances()">ğŸ’° ì •ì‚°í•˜ê¸°</button>
        <button onclick="resetGame()">ğŸ”„ ì´ˆê¸°í™”</button>
      </div>
    </div>
  </div>
  <div class="right-panel">
    <h3>ğŸ’° ì‹¤ì‹œê°„ ê¸ˆì•¡ í˜„í™©</h3>
    <div class="balance-output" id="balanceOutput"></div>
  </div>
</div>

<script>
  let currentTeams = { blue: [], red: [] };
  let playerBalances = {};
  let matchCount = 0;

  function assignTeams() {
    const roles = ['íƒ‘', 'ì •ê¸€', 'ë¯¸ë“œ', 'ì›ë”œ', 'ì„œí¿'];
    const input = document.getElementById('playerInput').value.trim();
    const players = input.split(/\n|,/).map(p => p.trim()).filter(p => p);

    if (players.length !== 10) {
      alert('ì •í™•íˆ 10ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');
      return;
    }

    players.forEach(p => {
      if (!(p in playerBalances)) playerBalances[p] = 0;
    });

    players.sort(() => Math.random() - 0.5);
    const team1 = players.slice(0, 5);
    const team2 = players.slice(5);
    const blue = Math.random() < 0.5 ? team1 : team2;
    const red = blue === team1 ? team2 : team1;

    currentTeams = { blue, red };

    const shuffle = arr => arr.sort(() => Math.random() - 0.5);
    const blueRoles = shuffle([...roles]);
    const redRoles = shuffle([...roles]);

    const blueOutput = ['ğŸŸ¦ ë¸”ë£¨íŒ€'];
    const redOutput = ['ğŸ”´ ë ˆë“œíŒ€'];

    blue.forEach((p, i) => blueOutput.push(`${roles[i]}: ${p}`));
    red.forEach((p, i) => redOutput.push(`${roles[i]}: ${p}`));

    document.getElementById('result').innerHTML = `
        <div class="team-box">
          <div class="team-title">${blueOutput[0]}</div>
          ${blueOutput.slice(1).join('<br>')}
        </div>
        <div class="team-box">
          <div class="team-title">${redOutput[0]}</div>
          ${redOutput.slice(1).join('<br>')}
        </div>
      `;
    showBalances();
  }

  function applyResult(winner) {
    if (matchCount >= 4) {
      alert("ìµœëŒ€ 4íŒê¹Œì§€ë§Œ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
      return;
    }

    if (!currentTeams.blue.length || !currentTeams.red.length) {
      alert("ë¨¼ì € íŒ€ì„ ë°°ì •í•´ì£¼ì„¸ìš”!");
      return;
    }

    const loser = winner === 'blue' ? 'red' : 'blue';

    currentTeams[winner].forEach(p => playerBalances[p] += 20000);
    currentTeams[loser].forEach(p => playerBalances[p] -= 20000);

    matchCount++;
    alert(`${winner === 'blue' ? 'ë¸”ë£¨íŒ€' : 'ë ˆë“œíŒ€'} ìŠ¹ë¦¬! ê¸ˆì•¡ ë°˜ì˜ë¨.`);
    showBalances();
  }

  function surrender(team) {
    if (!currentTeams.blue.length || !currentTeams.red.length) {
      alert("ë¨¼ì € íŒ€ì„ ë°°ì •í•´ì£¼ì„¸ìš”!");
      return;
    }

    const loser = currentTeams[team];
    const winner = currentTeams[team === 'blue' ? 'red' : 'blue'];

    loser.forEach(p => playerBalances[p] -= 10000);
    winner.forEach(p => playerBalances[p] += 10000);

    alert(`${team === 'blue' ? 'ë¸”ë£¨íŒ€' : 'ë ˆë“œíŒ€'}ì´ ê¸°ê¶Œí•˜ì˜€ìŠµë‹ˆë‹¤. ê¸ˆì•¡ ë°˜ì˜ë¨.`);
    showBalances();
  }

  function showBalances() {
    const entries = Object.entries(playerBalances);
    if (!entries.length) return;

    // ê¸ˆì•¡ ë‚´ë¦¼ì°¨ìˆœ, ê¸ˆì•¡ ê°™ìœ¼ë©´ ì´ë¦„ ì˜¤ë¦„ì°¨ìˆœ ì •ë ¬
    entries.sort((a, b) => {
      if (b[1] !== a[1]) return b[1] - a[1];
      return a[0].localeCompare(b[0], 'ko');
    });

    const text = entries
            .map(([name, balance]) => `- ${name}: ${balance.toLocaleString()}ì›`)
            .join("\n");
    document.getElementById('balanceOutput').textContent = `ì´ ${matchCount}íŒ ì§„í–‰ë¨\n` + text;
  }

  function resetGame() {
    playerBalances = {};
    matchCount = 0;
    currentTeams = { blue: [], red: [] };
    document.getElementById('balanceOutput').textContent = '';
    document.getElementById('result').textContent = '';
    alert("ê¸ˆì•¡ê³¼ íŒ ìˆ˜ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.");
  }
</script>
</body>
</html>